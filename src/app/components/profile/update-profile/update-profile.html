<div class="page-header">
  <a routerLink="/profile" class="back-button">
    <i class="fa-solid fa-arrow-left"></i>
    <span>Voltar</span>
  </a>
  <h1>Atualizar Dados Pessoais</h1>
  <p class="subtitle">Altere as suas informações de perfil.</p>
</div>

<div class="form-wrapper">
  @if (isLoading()) {
    <div class="spinner-container">
      <mat-spinner diameter="50"></mat-spinner>
    </div>
  } @else {
    <form [formGroup]="updateForm" (ngSubmit)="onSubmit()" class="update-form">

      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Nome de Utilizador</mat-label>
        <input matInput formControlName="username">
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email">
      </mat-form-field>

      <mat-form-field appearance="outline" class="form-field">
        <mat-label>Bio</mat-label>
        <textarea matInput formControlName="bio" placeholder="Fale um pouco sobre si..." maxlength="255" rows="4"></textarea>
        <mat-hint align="end">{{ updateForm.get('bio')?.value?.length || 0 }} / 255</mat-hint>
      </mat-form-field>

      <div class="actions">
        <button type="button" class="btn-stroked-warn" (click)="onCancel()">Cancelar</button>
        <button type="submit" class="btn-primary" [disabled]="updateForm.invalid || !updateForm.dirty || isLoading()">
          Salvar Alterações
        </button>
      </div>

    </form>
  }
</div>
